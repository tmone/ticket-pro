<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Account Quick Setup</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1a73e8;
            border-bottom: 2px solid #1a73e8;
            padding-bottom: 10px;
        }
        h2 {
            color: #5f6368;
            margin-top: 30px;
        }
        h3 {
            color: #202124;
            margin-top: 20px;
        }
        code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            line-height: 1.4;
        }
        pre code {
            background: none;
            padding: 0;
        }
        .benefits {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
        }
        .benefits ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .step {
            background: #f8f9fa;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 20px;
            margin: 20px 0;
        }
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #1a73e8;
            color: white;
            text-align: center;
            line-height: 30px;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 10px;
        }
        button {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }
        button:hover {
            background: #1557b0;
        }
        .warning {
            background: #fef7e0;
            border-left: 4px solid #f9ab00;
            padding: 15px;
            margin: 20px 0;
        }
        a {
            color: #1a73e8;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Service Account Quick Setup (5 ph√∫t)</h1>
        
        <div class="benefits">
            <strong>∆Øu ƒëi·ªÉm:</strong>
            <ul>
                <li>‚úÖ Kh√¥ng c·∫ßn OAuth consent screen</li>
                <li>‚úÖ Kh√¥ng b·ªã gi·ªõi h·∫°n test users</li>
                <li>‚úÖ Ho·∫°t ƒë·ªông ngay l·∫≠p t·ª©c</li>
                <li>‚úÖ Ph√π h·ª£p cho production</li>
            </ul>
        </div>

        <h2>C√°c b∆∞·ªõc th·ª±c hi·ªán:</h2>

        <div class="step">
            <h3><span class="step-number">1</span>T·∫°o Service Account</h3>
            <ol>
                <li>V√†o <a href="https://console.cloud.google.com/iam-admin/serviceaccounts" target="_blank">Service Accounts Console</a></li>
                <li>Click <strong>"+ CREATE SERVICE ACCOUNT"</strong></li>
                <li>ƒêi·ªÅn:
                    <ul>
                        <li>Service account name: <code>ticketcheck-sheets</code></li>
                        <li>Service account ID: (t·ª± ƒë·ªông)</li>
                    </ul>
                </li>
                <li>Click <strong>"CREATE AND CONTINUE"</strong></li>
                <li>Skip ph·∫ßn roles (click "CONTINUE")</li>
                <li>Click <strong>"DONE"</strong></li>
            </ol>
            <button onclick="window.open('https://console.cloud.google.com/iam-admin/serviceaccounts', '_blank')">
                M·ªü Service Accounts Console ‚Üí
            </button>
        </div>

        <div class="step">
            <h3><span class="step-number">2</span>T·∫°o Key</h3>
            <ol>
                <li>Click v√†o service account v·ª´a t·∫°o</li>
                <li>Tab <strong>"KEYS"</strong> > <strong>"ADD KEY"</strong> > <strong>"Create new key"</strong></li>
                <li>Ch·ªçn <strong>JSON</strong></li>
                <li><strong>Download file JSON</strong></li>
            </ol>
        </div>

        <div class="step">
            <h3><span class="step-number">3</span>Copy th√¥ng tin t·ª´ JSON</h3>
            <p>M·ªü file JSON v·ª´a download, t√¨m 2 th√¥ng tin:</p>
            <pre><code>{
  "client_email": "ticketcheck-sheets@your-project.iam.gserviceaccount.com",
  "private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBg...\n-----END PRIVATE KEY-----\n"
}</code></pre>
        </div>

        <div class="step">
            <h3><span class="step-number">4</span>Update .env.local</h3>
            <pre><code># Comment out OAuth credentials
# GOOGLE_CLIENT_ID=...
# GOOGLE_CLIENT_SECRET=...
# GOOGLE_REFRESH_TOKEN=...

# Add Service Account credentials
GOOGLE_SERVICE_ACCOUNT_EMAIL=ticketcheck-sheets@your-project.iam.gserviceaccount.com
GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBg...\n-----END PRIVATE KEY-----\n"</code></pre>
            <div class="warning">
                <strong>L∆∞u √Ω:</strong> Gi·ªØ nguy√™n c√°c k√Ω t·ª± <code>\n</code> trong private key
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">5</span>Share Google Sheets v·ªõi Service Account</h3>
            <ol>
                <li>M·ªü Google Sheets c·ªßa b·∫°n</li>
                <li>Click <strong>"Share"</strong> button</li>
                <li>Paste email c·ªßa service account (t·ª´ b∆∞·ªõc 3)</li>
                <li>Ch·ªçn <strong>"Editor"</strong> permission</li>
                <li>Click <strong>"Send"</strong></li>
            </ol>
        </div>

        <div class="step">
            <h3><span class="step-number">6</span>Restart Next.js</h3>
            <pre><code># Ctrl+C ƒë·ªÉ stop server
npm run dev</code></pre>
        </div>

        <div class="step">
            <h3><span class="step-number">7</span>Test</h3>
            <ul>
                <li>Paste Google Sheets URL v√†o app</li>
                <li>Click "Connect to Google Sheets"</li>
                <li>‚úÖ Success!</li>
            </ul>
        </div>

        <h2>Troubleshooting:</h2>
        <ul>
            <li><strong>"Not found"</strong>: Check ƒë√£ share sheet v·ªõi service account email ch∆∞a</li>
            <li><strong>"Permission denied"</strong>: Ensure role l√† "Editor" kh√¥ng ph·∫£i "Viewer"</li>
            <li><strong>"Invalid key"</strong>: Check copy ƒë√∫ng format, gi·ªØ nguy√™n \n trong private key</li>
        </ul>
    </div>
</body>
</html>