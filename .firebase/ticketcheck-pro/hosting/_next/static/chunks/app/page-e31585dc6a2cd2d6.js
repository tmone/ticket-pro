(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>i});var s=r(5155),a=r(2115),l=r(4253),n=r(2085),d=r(9434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:o=!1,...c}=e,u=o?l.DX:"button";return(0,s.jsx)(u,{className:(0,d.cn)(i({variant:a,size:n,className:r})),ref:t,...c})});o.displayName="Button"},2383:()=>{},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(5155),a=r(2115),l=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},2751:(e,t,r)=>{Promise.resolve().then(r.bind(r,9843))},3686:()=>{},5057:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(5155),a=r(2115),l=r(968),n=r(2085),d=r(9434);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,d.cn)(i(),r),...a})});o.displayName=l.b.displayName},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>d});var s=r(5155),a=r(2115),l=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});d.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(2115);let a=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],o={toasts:[]};function c(e){o=d(o,e),i.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(o);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7759:(e,t,r)=>{"use strict";r.d(t,{C5:()=>g,MJ:()=>p,eI:()=>x,lR:()=>h,lV:()=>o,zB:()=>u});var s=r(5155),a=r(2115),l=r(4253),n=r(2177),d=r(9434),i=r(5057);let o=n.Op,c=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(n.xI,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(f),{getFieldState:r,formState:s}=(0,n.xW)(),l=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=t;return{id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message"),...l}},f=a.createContext({}),x=a.forwardRef((e,t)=>{let{className:r,...l}=e,n=a.useId();return(0,s.jsx)(f.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,d.cn)("space-y-2",r),...l})})});x.displayName="FormItem";let h=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:l,formItemId:n}=m();return(0,s.jsx)(i.J,{ref:t,className:(0,d.cn)(l&&"text-destructive",r),htmlFor:n,...a})});h.displayName="FormLabel";let p=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:n,formDescriptionId:d,formMessageId:i}=m();return(0,s.jsx)(l.DX,{ref:t,id:n,"aria-describedby":a?"".concat(d," ").concat(i):"".concat(d),"aria-invalid":!!a,...r})});p.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:l}=m();return(0,s.jsx)("p",{ref:t,id:l,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let g=a.forwardRef((e,t)=>{var r;let{className:a,children:l,...n}=e,{error:i,formMessageId:o}=m(),c=i?String(null!=(r=null==i?void 0:i.message)?r:""):l;return c?(0,s.jsx)("p",{ref:t,id:o,className:(0,d.cn)("text-sm font-medium text-destructive",a),...n,children:c}):null});g.displayName="FormMessage"},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var s=r(2596),a=r(9688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},9843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee});var s=r(5155),a=r(2115),l=r(5695),n=r(5594),d=r(2177),i=r(221),o=r(8184),c=r(3925),u=r(1929),m=r.n(u),f=r(285),x=r(6695),h=r(2523),p=r(9434);let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,p.cn)("w-full caption-bottom text-sm",r),...a})})});g.displayName="Table";let b=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,p.cn)("[&_tr]:border-b",r),...a})});b.displayName="TableHeader";let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,p.cn)("[&_tr:last-child]:border-0",r),...a})});v.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,p.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let j=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,p.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});j.displayName="TableRow";let N=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,p.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});N.displayName="TableHead";let y=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,p.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});y.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,p.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption";var w=r(2085);let k=(0,w.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function T(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,p.cn)(k({variant:r}),t),...a})}var C=r(7481),R=r(1858);let A=R.bL;R.l9;let I=R.ZL,S=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(R.hJ,{className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:t})});S.displayName=R.hJ.displayName;let E=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(S,{}),(0,s.jsx)(R.UC,{ref:t,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...a})]})});E.displayName=R.UC.displayName;let _=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};_.displayName="AlertDialogHeader";let F=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};F.displayName="AlertDialogFooter";let D=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(R.hE,{ref:t,className:(0,p.cn)("text-lg font-semibold",r),...a})});D.displayName=R.hE.displayName;let O=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(R.VY,{ref:t,className:(0,p.cn)("text-sm text-muted-foreground",r),...a})});O.displayName=R.VY.displayName;let P=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(R.rc,{ref:t,className:(0,p.cn)((0,f.r)(),r),...a})});P.displayName=R.rc.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(R.ZD,{ref:t,className:(0,p.cn)((0,f.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...a})}).displayName=R.ZD.displayName;let L=(0,w.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),z=a.forwardRef((e,t)=>{let{className:r,variant:a,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,p.cn)(L({variant:a}),r),...l})});z.displayName="Alert";let U=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,p.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});U.displayName="AlertTitle";let M=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,p.cn)("text-sm [&_p]:leading-relaxed",r),...a})});M.displayName="AlertDescription";var B=r(7759),W=r(7484),V=r(518);let Z=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(W.bL,{ref:t,className:(0,p.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...a,children:(0,s.jsx)(W.C1,{className:(0,p.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(V.A,{className:"h-4 w-4"})})})});Z.displayName=W.bL.displayName;var q=r(5057),H=r(9951),J=r(8718),G=r(3349),$=r(389),Q=r(1949),X=r(7933),Y=r(7804);let K=n.z.object({uniqueCode:n.z.string().min(1,{message:"Code is required."})});function ee(){let e=(0,l.useRouter)(),{toast:t}=(0,C.dj)(),r=a.useRef(null),n=a.useRef(null),[u,p]=a.useState(!1),[w,k]=a.useState([]),[R,I]=a.useState([]),[S,L]=a.useState(null),[W,V]=a.useState(!1),[ee,et]=a.useState("not_found"),[er,es]=a.useState(!1),[ea,el]=a.useState(null),[en,ed]=a.useState(!1),ei=(0,d.mN)({resolver:(0,i.u)(K),defaultValues:{uniqueCode:""}}),eo=a.useCallback(()=>{es(!1),r.current&&r.current.srcObject&&(r.current.srcObject.getTracks().forEach(e=>e.stop()),r.current.srcObject=null)},[]),ec=a.useCallback(async()=>{el(null);try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});r.current&&(r.current.srcObject=e,await r.current.play(),es(!0))}catch(e){console.error("Camera access error:",e),el("Camera access denied. Please enable it in your browser settings."),es(!1)}},[]);a.useEffect(()=>("true"!==sessionStorage.getItem("isAuthenticated")?e.push("/login"):p(!0),()=>{eo()}),[e,eo]);let eu=a.useCallback(e=>{let{uniqueCode:t}=e,r=t.trim();try{let e=new URL(r).searchParams.values().next().value;e&&(r=e.trim())}catch(e){}let s=R.findIndex(e=>Object.values(e).some(e=>String(e).trim().toLowerCase()===r.toLowerCase()));if(-1!==s){let e=R[s],t=new Date;if(e.checkedInTime){let r=new Date(e.checkedInTime);(t.getTime()-r.getTime())/1e3<60?(L(e),et("success")):(L(e),et("duplicate"))}else{let r={...e,checkedInTime:t},a=[...R];a[s]=r,I(a),L(r),et("success")}}else L(void 0),et("not_found");V(!0)},[R]),em=a.useCallback(()=>{if(er&&r.current&&r.current.readyState===r.current.HAVE_ENOUGH_DATA&&n.current){let e=r.current,t=n.current,s=t.getContext("2d");if(s){t.height=e.videoHeight,t.width=e.videoWidth,s.drawImage(e,0,0,t.width,t.height);let r=s.getImageData(0,0,t.width,t.height),a=m()(r.data,r.width,r.height);if(a&&a.data){eo(),ei.setValue("uniqueCode",a.data,{shouldValidate:!0}),ei.handleSubmit(eu)();return}}}requestAnimationFrame(em)},[er,eo,ei,eu]);a.useEffect(()=>{if(er){let e=requestAnimationFrame(em);return()=>cancelAnimationFrame(e)}},[er,em]);let ef=a.useCallback(()=>{V(!1),ei.reset(),en&&("duplicate"===ee||"not_found"===ee)&&ec()},[en,ee,ei,ec]);return(a.useEffect(()=>{if(en&&"success"===ee&&W){let e=setTimeout(()=>{V(!1),ei.reset(),ec()},1e3);return()=>clearTimeout(e)}},[W,ee,en,ec,ei]),u)?(0,s.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-muted/40",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-background px-4 sm:static sm:h-auto sm:border-0 sm:bg-transparent sm:px-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(H.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)("h1",{className:"text-xl font-bold",children:"TicketCheck Pro"})]}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,s.jsxs)(f.$,{onClick:()=>{if(0===R.length)return void t({variant:"destructive",title:"No Data",description:"There is no data to export."});let e=R.map(e=>{let t={};for(let r of w)t[r]=e[r];return t["Checked-In At"]=e.checkedInTime?(0,o.GP)(e.checkedInTime,"yyyy-MM-dd HH:mm:ss"):"N/A",t}),r=c.Wp.json_to_sheet(e),s=new Blob([c.Wp.sheet_to_csv(r)],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href&&URL.revokeObjectURL(a.href);let l=URL.createObjectURL(s);a.setAttribute("href",l),a.setAttribute("download","attendee_report.csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),t({title:"Export Successful",description:"The attendee report has been downloaded."})},variant:"outline",size:"sm",children:[(0,s.jsx)(J.A,{className:"mr-2 h-4 w-4"}),"Export Report"]}),(0,s.jsx)(f.$,{onClick:()=>{sessionStorage.removeItem("isAuthenticated"),e.push("/login")},variant:"ghost",size:"icon",children:(0,s.jsx)(G.A,{className:"h-5 w-5"})})]})]}),(0,s.jsx)("main",{className:"flex-1 p-4 sm:px-6 sm:py-0",children:(0,s.jsxs)("div",{className:"grid auto-rows-max items-start gap-4 md:gap-8 lg:grid-cols-2 xl:grid-cols-3",children:[(0,s.jsxs)("div",{className:"grid auto-rows-max items-start gap-4 md:gap-8 lg:col-span-1",children:[(0,s.jsxs)(x.Zp,{children:[(0,s.jsxs)(x.aR,{children:[(0,s.jsx)(x.ZB,{children:"Upload Data"}),(0,s.jsx)(x.BT,{children:"Upload an Excel file. The first row should contain headers."})]}),(0,s.jsx)(x.Wu,{children:(0,s.jsx)(h.p,{id:"data-upload",type:"file",accept:".xls,.xlsx,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:e=>{var r;let s=null==(r=e.target.files)?void 0:r[0];if(!s)return;let a=new FileReader,l=s.name.toLowerCase();a.onload=e=>{try{var r;let s=null==(r=e.target)?void 0:r.result;if(!s)throw Error("Could not read file.");if(!l.endsWith(".xlsx")&&!l.endsWith(".xls"))throw Error("Unsupported file type. Please upload an Excel file.");let a=c.LF(s,{type:"array"}),n=a.SheetNames[0],d=a.Sheets[n],i=c.Wp.sheet_to_json(d);if(0===i.length)throw Error("No data found in the Excel file.");let o=i[0],u=Object.keys(o),m=i.map(e=>({...e,checkedInTime:null}));k(u),I(m),L(null),t({title:"Success!",description:"Successfully imported ".concat(i.length," rows.")})}catch(e){t({variant:"destructive",title:"Import Failed",description:e.message||"Please check the file format and try again."})}},a.onerror=()=>{t({variant:"destructive",title:"File Read Error",description:"There was an error reading the file."})},l.endsWith(".xlsx")||l.endsWith(".xls")?a.readAsArrayBuffer(s):t({variant:"destructive",title:"Unsupported File",description:"Please upload an Excel (.xlsx, .xls) file."})}})})]}),(0,s.jsxs)(x.Zp,{children:[(0,s.jsxs)(x.aR,{children:[(0,s.jsx)(x.ZB,{children:"Check In Attendee"}),(0,s.jsx)(x.BT,{children:"Enter a unique code or scan a QR code to check in an attendee."})]}),(0,s.jsxs)(x.Wu,{children:[(0,s.jsxs)("div",{className:"relative mb-4 flex aspect-square w-full items-center justify-center overflow-hidden rounded-lg border-2 border-dashed bg-muted",children:[(0,s.jsx)("video",{ref:r,className:"absolute inset-0 h-full w-full object-cover",autoPlay:!0,playsInline:!0,muted:!0}),er?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"absolute inset-0 z-10",style:{boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.4)"},children:(0,s.jsx)("div",{className:"pointer-events-none absolute top-1/2 left-1/2 h-3/4 w-3/4 max-w-[400px] max-h-[400px] -translate-x-1/2 -translate-y-1/2 rounded-lg"})}),(0,s.jsxs)("div",{className:"pointer-events-none relative z-20 h-3/4 w-3/4 max-w-[400px] max-h-[400px]",children:[(0,s.jsx)("div",{className:"absolute -top-1 -left-1 h-10 w-10 border-t-4 border-l-4 border-primary rounded-tl-lg"}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 h-10 w-10 border-t-4 border-r-4 border-primary rounded-tr-lg"}),(0,s.jsx)("div",{className:"absolute -bottom-1 -left-1 h-10 w-10 border-b-4 border-l-4 border-primary rounded-bl-lg"}),(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 h-10 w-10 border-b-4 border-r-4 border-primary rounded-br-lg"})]})]}):(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:(0,s.jsx)($.A,{className:"h-16 w-16 text-muted-foreground/50"})}),(0,s.jsx)("canvas",{ref:n,className:"hidden"})]}),ea&&(0,s.jsxs)(z,{variant:"destructive",className:"mb-4",children:[(0,s.jsx)(Q.A,{className:"h-4 w-4"}),(0,s.jsx)(U,{children:"Camera Error"}),(0,s.jsx)(M,{children:ea})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,s.jsx)(Z,{id:"continuous-scan",checked:en,onCheckedChange:e=>ed(!!e)}),(0,s.jsx)(q.J,{htmlFor:"continuous-scan",className:"cursor-pointer",children:"Li\xean tục"})]}),(0,s.jsxs)(f.$,{type:"button",onClick:()=>{er?eo():ec()},className:"w-full mb-4",variant:"outline",children:[(0,s.jsx)(X.A,{className:"mr-2 h-4 w-4"}),er?"Stop Camera":"Scan QR Code"]}),(0,s.jsx)(B.lV,{...ei,children:(0,s.jsxs)("form",{onSubmit:ei.handleSubmit(eu),className:"space-y-4",children:[(0,s.jsx)(B.zB,{control:ei.control,name:"uniqueCode",render:e=>{let{field:t}=e;return(0,s.jsxs)(B.eI,{children:[(0,s.jsx)(B.lR,{children:"Unique Code"}),(0,s.jsx)(B.MJ,{children:(0,s.jsx)(h.p,{placeholder:"Paste or type code here...",...t})}),(0,s.jsx)(B.C5,{})]})}}),(0,s.jsxs)(f.$,{type:"submit",className:"w-full bg-accent hover:bg-accent/90",children:[(0,s.jsx)(H.A,{className:"mr-2 h-4 w-4"})," Check In"]})]})})]})]})]}),(0,s.jsx)("div",{className:"lg:col-span-1 xl:col-span-2",children:(0,s.jsxs)(x.Zp,{children:[(0,s.jsxs)(x.aR,{children:[(0,s.jsx)(x.ZB,{children:"Data List"}),(0,s.jsx)(x.BT,{children:"A list of all imported rows and their check-in status."})]}),(0,s.jsx)(x.Wu,{children:(0,s.jsx)("div",{className:"max-h-[600px] overflow-auto",children:(0,s.jsxs)(g,{children:[(0,s.jsx)(b,{children:(0,s.jsxs)(j,{children:[w.map(e=>(0,s.jsx)(N,{children:e},e)),w.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N,{children:"Status"}),(0,s.jsx)(N,{children:"Checked In At"})]})]})}),(0,s.jsx)(v,{children:R.length>0?R.map((e,t)=>(0,s.jsxs)(j,{children:[w.map(t=>{var r;return(0,s.jsx)(y,{children:String(null!=(r=e[t])?r:"")},t)}),(0,s.jsx)(y,{children:(0,s.jsx)(T,{variant:e.checkedInTime?"default":"secondary",className:e.checkedInTime?"bg-accent text-accent-foreground":"",children:e.checkedInTime?"Checked In":"Pending"})}),(0,s.jsx)(y,{children:e.checkedInTime?(0,o.GP)(e.checkedInTime,"PPpp"):"N/A"})]},t)):(0,s.jsx)(j,{children:(0,s.jsx)(y,{colSpan:w.length>0?w.length+2:1,className:"h-24 text-center",children:"No data uploaded yet."})})})]})})})]})})]})}),(0,s.jsx)(A,{open:W,onOpenChange:V,children:(0,s.jsxs)(E,{children:["success"===ee&&S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(_,{className:"bg-accent text-accent-foreground p-4 -mx-6 -mt-6 sm:rounded-t-lg",children:[(0,s.jsxs)(D,{className:"flex items-center gap-2",children:[(0,s.jsx)(Y.A,{className:"h-6 w-6"}),"Check-in Successful!"]}),(0,s.jsx)(O,{className:"text-accent-foreground/90",children:"Welcome! Details for the attendee are below."})]}),(0,s.jsxs)("div",{className:"text-sm space-y-1 max-h-60 overflow-auto",children:[Object.entries(S).filter(e=>{let[t]=e;return"checkedInTime"!==t}).map(e=>{let[t,r]=e;return(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[t,":"]})," ",String(r)]},t)}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Checked-in:"})," ",S.checkedInTime?(0,o.GP)(S.checkedInTime,"PPpp"):"N/A"]})]})]}),"duplicate"===ee&&S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(_,{className:"bg-destructive text-destructive-foreground p-4 -mx-6 -mt-6 sm:rounded-t-lg",children:[(0,s.jsxs)(D,{className:"flex items-center gap-2",children:[(0,s.jsx)(Q.A,{className:"h-8 w-8"}),"Already Checked In!"]}),(0,s.jsx)(O,{className:"text-destructive-foreground/90",children:"This ticket has already been scanned. Please verify the attendee."})]}),(0,s.jsxs)("div",{className:"text-sm space-y-2 max-h-60 overflow-auto rounded-md border bg-muted p-4",children:[(0,s.jsx)("p",{className:"font-bold text-lg mb-2",children:"Original Check-in Details:"}),Object.entries(S).filter(e=>{let[t]=e;return"checkedInTime"!==t}).map(e=>{let[t,r]=e;return(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[t,":"]})," ",String(r)]},t)}),(0,s.jsxs)("p",{className:"mt-2",children:[(0,s.jsx)("strong",{children:"Initial Check-in Time:"})," ",S.checkedInTime?(0,o.GP)(S.checkedInTime,"PPpp"):"N/A"]})]})]}),"not_found"===ee&&(0,s.jsxs)(_,{className:"bg-yellow-400 text-yellow-900 p-4 -mx-6 -mt-6 sm:rounded-t-lg",children:[(0,s.jsxs)(D,{className:"flex items-center gap-2",children:[(0,s.jsx)(Q.A,{className:"h-6 w-6"}),"Ticket Not Found"]}),(0,s.jsx)(O,{className:"text-yellow-900/90",children:"The scanned code does not match any entry in the list. Please try again."})]}),(0,s.jsx)(F,{children:(0,s.jsx)(P,{onClick:ef,children:"Close"})})]})})]}):(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:"Loading..."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[524,153,172,956,239,53,441,684,358],()=>t(2751)),_N_E=e.O()}]);